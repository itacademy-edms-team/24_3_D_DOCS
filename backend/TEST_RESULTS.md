# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 2025-10-20  
**–í–µ—Ä—Å–∏—è:** JWT Authentication System v1.0  
**–¢–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:** Docker (PostgreSQL + Redis) + ASP.NET Core 9.0

---

## ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 1. **Register** - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
POST /api/auth/register
{
  "email": "test@example.com",
  "password": "password123",
  "name": "Test User"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **PASS**
- HTTP Status: 200 OK
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: accessToken, refreshToken, user data
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω –≤ –ë–î
- –¢–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Redis

**–û—Ç–≤–µ—Ç:**
```json
{
  "accessToken": "eyJhbGci...",
  "refreshToken": "5798f237-5032-4c92-a76d-c9021406bb20",
  "accessTokenExpiration": "2025-10-20T10:23:54Z",
  "refreshTokenExpiration": "2025-10-27T09:23:54Z",
  "user": {
    "id": "20aef24c-3425-40e1-a7f7-98d772148e47",
    "email": "test@example.com",
    "name": "Test User",
    "role": "User"
  }
}
```

---

### 2. **Login** - –í—Ö–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
POST /api/auth/login
{
  "email": "test@example.com",
  "password": "password123"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **PASS**
- HTTP Status: 200 OK
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–µ accessToken –∏ refreshToken
- Multi-device support —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π)

---

### 3. **GET /me** - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
```bash
GET /api/auth/me
Authorization: Bearer {accessToken}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **PASS**
- HTTP Status: 200 OK
- JWT middleware –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç claims –∏–∑ —Ç–æ–∫–µ–Ω–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç userId, email, role –∏ –≤—Å–µ claims

**–û—Ç–≤–µ—Ç:**
```json
{
  "userId": "20aef24c-3425-40e1-a7f7-98d772148e47",
  "email": "test@example.com",
  "role": "User",
  "claims": [...]
}
```

---

### 4. **Refresh Token** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
```bash
POST /api/auth/refresh
{
  "refreshToken": "5798f237-5032-4c92-a76d-c9021406bb20"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **PASS** üéâ
- HTTP Status: 200 OK
- **Token Rotation —Ä–∞–±–æ—Ç–∞–µ—Ç:**
  - –°—Ç–∞—Ä—ã–π refresh token: `5798f237-...`
  - –ù–æ–≤—ã–π refresh token: `2a736790-...`
  - –°—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω —É–¥–∞–ª–µ–Ω –∏–∑ Redis
  - –ù–æ–≤—ã–π —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ Redis
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–µ accessToken –∏ refreshToken

**–û—Ç–≤–µ—Ç:**
```json
{
  "accessToken": "eyJhbGci...",
  "refreshToken": "2a736790-5fe8-430c-ba88-1528f1eb6b8d",
  "accessTokenExpiration": "2025-10-20T10:24:13Z",
  "refreshTokenExpiration": "2025-10-27T09:24:13Z"
}
```

---

### 5. **Refresh —Å —Å—Ç–∞—Ä—ã–º —Ç–æ–∫–µ–Ω–æ–º** (–ø–æ—Å–ª–µ rotation)
```bash
POST /api/auth/refresh
{
  "refreshToken": "5798f237-5032-4c92-a76d-c9021406bb20"  // —Å—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **PASS**
- HTTP Status: 401 Unauthorized
- –°–æ–æ–±—â–µ–Ω–∏–µ: "–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π –∏–ª–∏ –∏—Å—Ç–µ–∫—à–∏–π refresh token"
- **Token Rotation –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞** ‚úì

---

### 6. **–û—à–∏–±–æ—á–Ω—ã–π –ø–∞—Ä–æ–ª—å**
```bash
POST /api/auth/login
{
  "email": "test@example.com",
  "password": "wrongpassword"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **PASS**
- HTTP Status: 401 Unauthorized
- –°–æ–æ–±—â–µ–Ω–∏–µ: "–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å"

---

### 7. **–î—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è email**
```bash
POST /api/auth/register
{
  "email": "test@example.com",  // —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  "password": "password123",
  "name": "Duplicate"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **PASS**
- HTTP Status: 400 Bad Request
- –°–æ–æ–±—â–µ–Ω–∏–µ: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

---

### 8. **–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π refresh token**
```bash
POST /api/auth/refresh
{
  "refreshToken": "invalid-token-12345"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **PASS**
- HTTP Status: 401 Unauthorized
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **Logout** - ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û!

```bash
POST /api/auth/logout
Authorization: Bearer {accessToken}
{
  "refreshToken": "c21d37c6-6c23-4502-a20b-9cc914890308"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **PASS**
- HTTP Status: 200 OK
- –°–æ–æ–±—â–µ–Ω–∏–µ: "–í—ã—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ"

**–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:**
1. –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –≤ `IJwtService` –∏ `JwtService`:
   - `GetClaimsWithoutValidation(token)` - –∏–∑–≤–ª–µ–∫–∞–µ—Ç claims –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ expiration
   - `GetUserIdFromTokenWithoutValidation(token)` - –ø–æ–ª—É—á–∞–µ—Ç userId
   - `GetJtiFromTokenWithoutValidation(token)` - –ø–æ–ª—É—á–∞–µ—Ç JTI
2. –û–±–Ω–æ–≤–ª–µ–Ω `AuthService.LogoutAsync` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤
3. Access token –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ Redis blacklist ‚úì
4. Refresh token —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ Redis ‚úì
5. Refresh token mapping —É–¥–∞–ª—è–µ—Ç—Å—è ‚úì

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ Logout –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK
- ‚úÖ Access token –≤ blacklist (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ Redis)
- ‚úÖ Refresh token —É–¥–∞–ª–µ–Ω (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ Redis)
- ‚úÖ –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å deleted refresh token ‚Üí 401 Unauthorized

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | HTTP Code | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------|--------|-----------|-------------|
| Register –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | ‚úÖ PASS | 200 | –†–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ |
| Register –¥—É–±–ª–∏–∫–∞—Ç email | ‚úÖ PASS | 400 | –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| Login —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º | ‚úÖ PASS | 200 | –†–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ |
| Login —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º | ‚úÖ PASS | 401 | –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| GET /me —Å valid —Ç–æ–∫–µ–Ω–æ–º | ‚úÖ PASS | 200 | JWT middleware —Ä–∞–±–æ—Ç–∞–µ—Ç |
| Refresh Token (–ø–µ—Ä–≤—ã–π —Ä–∞–∑) | ‚úÖ PASS | 200 | Token rotation —Ä–∞–±–æ—Ç–∞–µ—Ç |
| Refresh Token (—Å—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω) | ‚úÖ PASS | 401 | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ |
| Refresh invalid token | ‚úÖ PASS | 401 | –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| Logout | ‚úÖ PASS | 200 | –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ —Ñ–∏–∫—Å–∞! |
| Refresh –ø–æ—Å–ª–µ Logout | ‚úÖ PASS | 401 | –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω |

**–ò—Ç–æ–≥–æ:** 10/10 (100%) —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ! üéâ

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤:
```bash
$ docker exec rusal_redis redis-cli KEYS "refresh_token*"

1) "refresh_token_mapping:50784dd4-..."
2) "refresh_token_mapping:2840bac9-..."
3) "refresh_token:20aef24c-...:50784dd4-..."
4) "refresh_token:20aef24c-...:2840bac9-..."
5) "refresh_token_mapping:2a736790-..."
6) "refresh_token:20aef24c-...:2a736790-..."
```

‚úÖ **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:**
- Refresh —Ç–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- Mapping'–∏ (token ‚Üí userId) —Å–æ–∑–¥–∞—é—Ç—Å—è
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª—é—á–µ–π –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
- Multi-device support —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

---

## üéØ –í—ã–≤–æ–¥—ã

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:
1. ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ Login** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
2. ‚úÖ **JWT Authentication** - middleware –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ç–æ–∫–µ–Ω—ã
3. ‚úÖ **Refresh Token —Å Rotation** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ –≤—ã—Å–æ—Ç–µ
4. ‚úÖ **Redis —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** - mapping —Ä–∞–±–æ—Ç–∞–µ—Ç, O(1) –æ–ø–µ—Ä–∞—Ü–∏–∏
5. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ HTTP –∫–æ–¥—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
6. ‚úÖ **Multi-device support** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Å—Å–∏–π

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
1. ‚ö†Ô∏è **Blacklist Middleware** - –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (—Ç–æ–∫–µ–Ω—ã –≤ blacklist –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ)
   - –°–µ–π—á–∞—Å —Ç–æ–∫–µ–Ω—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ blacklist, –Ω–æ middleware –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ù—É–∂–µ–Ω middleware –º–µ–∂–¥—É JWT Authentication –∏ Controllers

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. ‚úÖ ~~–ò—Å–ø—Ä–∞–≤–∏—Ç—å `Logout`~~ - **–ì–û–¢–û–í–û!**
2. **HIGH:** –î–æ–±–∞–≤–∏—Ç—å Blacklist Middleware –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
3. **MEDIUM:** –î–æ–±–∞–≤–∏—Ç—å Rate Limiting –Ω–∞ login/register
4. **LOW:** –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (structured logging)

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production

**–ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** ‚úÖ 100% –≥–æ—Ç–æ–≤–æ!  
**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è 85% –≥–æ—Ç–æ–≤–æ (–Ω—É–∂–µ–Ω blacklist middleware)  
**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ‚úÖ –û—Ç–ª–∏—á–Ω–æ (Redis O(1) –æ–ø–µ—Ä–∞—Ü–∏–∏)  
**–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** ‚úÖ –ì–æ—Ç–æ–≤–æ (stateless backend)

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** üü¢ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é, blacklist middleware –¥–ª—è production

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ ~~–ò—Å–ø—Ä–∞–≤–∏—Ç—å Logout~~ - **–ì–û–¢–û–í–û!**
2. **–î–æ–±–∞–≤–∏—Ç—å Blacklist Middleware** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
3. **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** - –ø–æ–∫—Ä—ã—Ç—å –≤—Å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
4. **–î–æ–±–∞–≤–∏—Ç—å Rate Limiting** - –∑–∞—â–∏—Ç–∞ –æ—Ç brute force
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

---

## üîÑ UPDATE: Logout –∏—Å–ø—Ä–∞–≤–ª–µ–Ω!

**–î–∞—Ç–∞:** 2025-10-20 (–ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–ü—Ä–æ–±–ª–µ–º–∞:**  
`LogoutAsync` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `GetUserIdFromToken` –∫–æ—Ç–æ—Ä—ã–π –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–ª expiration. Expired —Ç–æ–∫–µ–Ω—ã –Ω–µ –º–æ–≥–ª–∏ –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ expiration:
```csharp
// IJwtService
ClaimsPrincipal? GetClaimsWithoutValidation(string token);
Guid? GetUserIdFromTokenWithoutValidation(string token);
string? GetJtiFromTokenWithoutValidation(string token);

// JwtService implementation
public ClaimsPrincipal? GetClaimsWithoutValidation(string token)
{
    var tokenHandler = new JwtSecurityTokenHandler();
    var jwtToken = tokenHandler.ReadJwtToken(token); // –ë–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏!
    var identity = new ClaimsIdentity(jwtToken.Claims, "jwt");
    return new ClaimsPrincipal(identity);
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
‚úÖ Logout —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ (expired –∏–ª–∏ valid)  
‚úÖ 100% —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

---

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–ª:** AI Assistant  
**–û–∫—Ä—É–∂–µ–Ω–∏–µ:** Docker Compose (PostgreSQL 16 + Redis 7) + ASP.NET Core 9.0  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç  
**Redis:** ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

